# 2026 NOTE by rfhb

On 2026-01-17, this repository was forked from
<https://github.com/ropensci-archive/elastic> to explore efforts for
maintaining R package `elastic` until such time that a current R package
for a Lucene-using database could be found or developed. The orignal
package `elastic` by <https://ropensci.org/> was archived on CRAN on
2026-01-14 at the original maintainer’s request.

Since then, changes in this repository include updates to code and
tests, see [NEWS.md](https://rfhb.github.io/elastic/NEWS.md).

Package `elastic` is again available from CRAN since 2026-01-25 and can
be installed with

``` r

install.packages("elastic")
```

This README file remains to be reviewed and updated.

To install the development version of package ‘elastic’ from this
repository, run in R

``` r

devtools::install_github("rfhb/elastic")
```

# 2025-12-02 NOTE by rOpenSci

## elastic

[![Project Status:
Unsupported](https://www.repostatus.org/badges/latest/unsupported.svg)](https://www.repostatus.org/#unsupported)

This package has been archived on CRAN. The former README is now in
[README-not.md](https://rfhb.github.io/elastic/README-not.md).

# 2025-12-01 README.md

# elastic

[![Project Status: Active – The project has reached a stable, usable
state and is being actively
developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![R-check](https://github.com/ropensci-archive/elastic/workflows/R-check/badge.svg)](https://github.com/ropensci-archive/elastic/actions?query=workflow%3AR-check)
[![rstudio mirror
downloads](https://cranlogs.r-pkg.org/badges/elastic?color=E664A4)](https://github.com/r-hub/cranlogs.app)
[![cran
version](https://www.r-pkg.org/badges/version/elastic)](https://cran.r-project.org/package=elastic)

**A general purpose R interface to
[Elasticsearch](https://www.elastic.co/elasticsearch/)**

## Elasticsearch info

- [Elasticsearch home page](https://www.elastic.co/elasticsearch/)
- [API docs](https://www.elastic.co/docs/get-started)

## Compatibility

This client is developed following the latest stable releases, currently
`v7.10.0`. It is generally compatible with older versions of
Elasticsearch. Unlike the [Python
client](https://github.com/elastic/elasticsearch-py#compatibility), we
try to keep as much compatibility as possible within a single version of
this client, as that’s an easier setup in R world.

## Security

You’re fine running ES locally on your machine, but be careful just
throwing up ES on a server with a public IP address - make sure to think
about security.

- Elastic has paid products - but probably only applicable to enterprise
  users
- DIY security - there are a variety of techniques for securing your
  Elasticsearch installation. A number of resources are collected in a
  [blog post](https://recology.info/2015/02/secure-elasticsearch/) -
  tools include putting your ES behind something like Nginx, putting
  basic auth on top of it, using https, etc.

## Installation

Stable version from CRAN

``` r

install.packages("elastic")
```

Development version from GitHub

``` r

remotes::install_github("ropensci/elastic")
```

``` r

library('elastic')
```

## Install Elasticsearch

- [Elasticsearch installation
  help](https://www.elastic.co/docs/deploy-manage/deploy/self-managed/installing-elasticsearch)

**w/ Docker**

Pull the official elasticsearch image

``` R
# elasticsearch needs to have a version tag. We're pulling 7.10.1 here
docker pull elasticsearch:7.10.1
```

Then start up a container

``` R
docker run -d -p 9200:9200 elasticsearch:7.10.1
```

Then elasticsearch should be available on port 9200, try
`curl localhost:9200` and you should get the familiar message indicating
ES is on.

If you’re using boot2docker, you’ll need to use the IP address in place
of localhost. Get it by doing `boot2docker ip`.

**on OSX**

- Download zip or tar file from Elasticsearch [see here for
  download](https://www.elastic.co/downloads), e.g.,
  `curl -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.10.0-darwin-x86_64.tar.gz`
- Extract: `tar -zxvf elasticsearch-7.10.0-darwin-x86_64.tar.gz`
- Move it: `sudo mv elasticsearch-7.10.0 /usr/local`
- Navigate to /usr/local: `cd /usr/local`
- Delete symlinked `elasticsearch` directory: `rm -rf elasticsearch`
- Add shortcut: `sudo ln -s elasticsearch-7.10.0 elasticsearch` (replace
  version with your version)

You can also install via Homebrew: `brew install elasticsearch`

> Note: for the 1.6 and greater upgrades of Elasticsearch, they want you
> to have java 8 or greater. I downloaded Java 8 from here
> <https://www.oracle.com/java/> and it seemed to work great.

## Upgrading Elasticsearch

I am not totally clear on best practice here, but from what I
understand, when you upgrade to a new version of Elasticsearch, place
old `elasticsearch/data` and `elasticsearch/config` directories into the
new installation (`elasticsearch/` dir). The new elasticsearch instance
with replaced data and config directories should automatically update
data to the new version and start working. Maybe if you use homebrew on
a Mac to upgrade it takes care of this for you - not sure.

Obviously, upgrading Elasticsearch while keeping it running is a
different thing ([some help here from
Elastic](https://www.elastic.co/docs/deploy-manage/upgrade/deployment-or-cluster)).

## Start Elasticsearch

- Navigate to elasticsearch: `cd /usr/local/elasticsearch`
- Start elasticsearch: `bin/elasticsearch`

I create a little bash shortcut called `es` that does both of the above
commands in one step
(`cd /usr/local/elasticsearch && bin/elasticsearch`).

## Initialization

The function
[`connect()`](https://rfhb.github.io/elastic/reference/connect.md) is
used before doing anything else to set the connection details to your
remote or local elasticsearch store. The details created by
[`connect()`](https://rfhb.github.io/elastic/reference/connect.md) are
written to your options for the current session, and are used by
`elastic` functions.

``` r

x <- connect(port = 9200)
```

> If you’re following along here with a local instance of Elasticsearch,
> you’ll use `x` below to do more stuff.

For AWS hosted elasticsearch, make sure to specify path = “” and the
correct port - transport schema pair.

``` r
connect(host = <aws_es_endpoint>, path = "", port = 80, transport_schema  = "http")
  # or
connect(host = <aws_es_endpoint>, path = "", port = 443, transport_schema  = "https")
```

If you are using Elastic Cloud or an installation with authentication
(X-pack), make sure to specify path = ““, user =”“, pwd =”” and the
correct port - transport schema pair.

``` r
connect(host = <ec_endpoint>, path = "", user="test", pwd = "1234", port = 9243, transport_schema  = "https")
```

  

## Get some data

Elasticsearch has a bulk load API to load data in fast. The format is
pretty weird though. It’s sort of JSON, but would pass no JSON linter. I
include a few data sets in `elastic` so it’s easy to get up and running,
and so when you run examples in this package they’ll actually run the
same way (hopefully).

I have prepare a non-exported function useful for preparing the weird
format that Elasticsearch wants for bulk data loads, that is somewhat
specific to PLOS data (See below), but you could modify for your
purposes. See `make_bulk_plos()` and `make_bulk_gbif()`
[here](https://github.com/ropensci-archive/elastic/blob/master/R/docs_bulk.r).

### Shakespeare data

Elasticsearch provides some data on Shakespeare plays. I’ve provided a
subset of this data in this package. Get the path for the file specific
to your machine:

``` r

shakespeare <- system.file("examples", "shakespeare_data.json", package = "elastic")
# If you're on Elastic v6 or greater, use this one
shakespeare <- system.file("examples", "shakespeare_data_.json", package = "elastic")
shakespeare <- type_remover(shakespeare)
```

Then load the data into Elasticsearch:

> make sure to create your connection object with
> [`connect()`](https://rfhb.github.io/elastic/reference/connect.md)

``` r

# x <- connect()  # do this now if you didn't do this above
invisible(docs_bulk(x, shakespeare))
```

If you need some big data to play with, the shakespeare dataset is a
good one to start with. You can get the whole thing and pop it into
Elasticsearch (beware, may take up to 10 minutes or so.):

``` sh
curl -XGET https://download.elastic.co/demos/kibana/gettingstarted/shakespeare_6.0.json > shakespeare.json
curl -XPUT localhost:9200/_bulk --data-binary @shakespeare.json
```

### Public Library of Science (PLOS) data

A dataset inluded in the `elastic` package is metadata for PLOS
scholarly articles. Get the file path, then load:

``` r

if (index_exists(x, "plos")) index_delete(x, "plos")
plosdat <- system.file("examples", "plos_data.json", package = "elastic")
plosdat <- type_remover(plosdat)
invisible(docs_bulk(x, plosdat))
```

### Global Biodiversity Information Facility (GBIF) data

A dataset inluded in the `elastic` package is data for GBIF species
occurrence records. Get the file path, then load:

``` r

if (index_exists(x, "gbif")) index_delete(x, "gbif")
gbifdat <- system.file("examples", "gbif_data.json", package = "elastic")
gbifdat <- type_remover(gbifdat)
invisible(docs_bulk(x, gbifdat))
```

GBIF geo data with a coordinates element to allow `geo_shape` queries

``` r

if (index_exists(x, "gbifgeo")) index_delete(x, "gbifgeo")
gbifgeo <- system.file("examples", "gbif_geo.json", package = "elastic")
gbifgeo <- type_remover(gbifgeo)
invisible(docs_bulk(x, gbifgeo))
```

### More data sets

There are more datasets formatted for bulk loading in the
`sckott/elastic_data` GitHub repository. Find it at
<https://github.com/sckott/elastic_data>

  

## Search

Search the `plos` index and only return 1 result

``` r

Search(x, index = "plos", size = 1)$hits$hits
```

Search the `plos` index, and query for *antibody*, limit to 1 result

``` r

Search(x, index = "plos", q = "antibody", size = 1)$hits$hits
```

## Get documents

Get document with id=4

``` r

docs_get(x, index = 'plos', id = 4)
```

Get certain fields

``` r

docs_get(x, index = 'plos', id = 4, fields = 'id')
```

## Get multiple documents via the multiget API

Same index and different document ids

``` r

docs_mget(x, index = "plos", id = 1:2)
```

## Parsing

You can optionally get back raw `json` from
[`Search()`](https://rfhb.github.io/elastic/reference/Search.md),
[`docs_get()`](https://rfhb.github.io/elastic/reference/docs_get.md),
and
[`docs_mget()`](https://rfhb.github.io/elastic/reference/docs_mget.md)
setting parameter `raw=TRUE`.

For example:

``` r

(out <- docs_mget(x, index = "plos", id = 1:2, raw = TRUE))
```

Then parse

``` r

jsonlite::fromJSON(out)
```

## Known pain points

- On secure Elasticsearch servers:
  - `HEAD` requests don’t seem to work, not sure why
  - If you allow only `GET` requests, a number of functions that require
    `POST` requests obviously then won’t work. A big one is
    [`Search()`](https://rfhb.github.io/elastic/reference/Search.md),
    but you can use
    [`Search_uri()`](https://rfhb.github.io/elastic/reference/Search_uri.md)
    to get around this, which uses `GET` instead of `POST`, but you
    can’t pass a more complicated query via the body

## Screencast

A screencast introducing the package:
[vimeo.com/124659179](https://vimeo.com/124659179)

## Meta

- Please [report any issues or
  bugs](https://github.com/ropensci-archive/elastic/issues)
- License: MIT
- Get citation information for `elastic` in R doing
  `citation(package = 'elastic')`
- Please note that this package is released with a [Contributor Code of
  Conduct](https://ropensci.org/code-of-conduct/). By contributing to
  this project, you agree to abide by its terms.

# Package index

## elastic

High level overview of package

- [`elastic`](https://rfhb.github.io/elastic/reference/elastic.md)
  [`elastic-package`](https://rfhb.github.io/elastic/reference/elastic.md)
  : elastic
- [`elastic-defunct`](https://rfhb.github.io/elastic/reference/elastic-defunct.md)
  : Defunct functions in elastic

## Connect

- [`connect()`](https://rfhb.github.io/elastic/reference/connect.md) :
  Set connection details to an Elasticsearch engine.
- [`ping()`](https://rfhb.github.io/elastic/reference/ping.md) : Ping an
  Elasticsearch server.

## Cat

- [`cat_()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_aliases()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_allocation()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_count()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_segments()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_health()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_indices()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_master()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_nodes()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_nodeattrs()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_pending_tasks()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_plugins()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_recovery()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_thread_pool()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_shards()`](https://rfhb.github.io/elastic/reference/cat.md)
  [`cat_fielddata()`](https://rfhb.github.io/elastic/reference/cat.md) :
  Use the cat Elasticsearch api.

## Search

Various search APIs

- [`Search()`](https://rfhb.github.io/elastic/reference/Search.md) :
  Full text search of Elasticsearch
- [`Search_template()`](https://rfhb.github.io/elastic/reference/Search_template.md)
  [`Search_template_register()`](https://rfhb.github.io/elastic/reference/Search_template.md)
  [`Search_template_get()`](https://rfhb.github.io/elastic/reference/Search_template.md)
  [`Search_template_delete()`](https://rfhb.github.io/elastic/reference/Search_template.md)
  [`Search_template_render()`](https://rfhb.github.io/elastic/reference/Search_template.md)
  : Search or validate templates
- [`Search_uri()`](https://rfhb.github.io/elastic/reference/Search_uri.md)
  : Full text search of Elasticsearch with URI search
- [`search_shards()`](https://rfhb.github.io/elastic/reference/search_shards.md)
  : Search shards
- [`searchapis`](https://rfhb.github.io/elastic/reference/searchapis.md)
  : Overview of search functions
- [`msearch()`](https://rfhb.github.io/elastic/reference/msearch.md) :
  Multi-search
- [`count()`](https://rfhb.github.io/elastic/reference/count.md) : Get
  counts of the number of records per index.
- [`explain()`](https://rfhb.github.io/elastic/reference/explain.md) :
  Explain a search query.
- [`validate()`](https://rfhb.github.io/elastic/reference/validate.md) :
  Validate a search
- [`field_stats()`](https://rfhb.github.io/elastic/reference/field_stats.md)
  : Search field statistics
- [`field_caps()`](https://rfhb.github.io/elastic/reference/field_caps.md)
  : Field capabilities
- [`fielddata`](https://rfhb.github.io/elastic/reference/fielddata.md) :
  fielddata
- [`percolate_register()`](https://rfhb.github.io/elastic/reference/percolate.md)
  [`percolate_match()`](https://rfhb.github.io/elastic/reference/percolate.md)
  [`percolate_list()`](https://rfhb.github.io/elastic/reference/percolate.md)
  [`percolate_count()`](https://rfhb.github.io/elastic/reference/percolate.md)
  [`percolate_delete()`](https://rfhb.github.io/elastic/reference/percolate.md)
  : Percolater
- [`scroll()`](https://rfhb.github.io/elastic/reference/scroll.md)
  [`scroll_clear()`](https://rfhb.github.io/elastic/reference/scroll.md)
  : Scroll search function
- [`preference`](https://rfhb.github.io/elastic/reference/preference.md)
  : Preferences.

## Documents

Work with document APIs

- [`docs_bulk()`](https://rfhb.github.io/elastic/reference/docs_bulk.md)
  : Use the bulk API to create, index, update, or delete documents.
- [`docs_bulk_create()`](https://rfhb.github.io/elastic/reference/docs_bulk_create.md)
  : Use the bulk API to create documents
- [`docs_bulk_delete()`](https://rfhb.github.io/elastic/reference/docs_bulk_delete.md)
  : Use the bulk API to delete documents
- [`docs_bulk_index()`](https://rfhb.github.io/elastic/reference/docs_bulk_index.md)
  : Use the bulk API to index documents
- [`docs_bulk_prep()`](https://rfhb.github.io/elastic/reference/docs_bulk_prep.md)
  : Use the bulk API to prepare bulk format data
- [`docs_bulk_update()`](https://rfhb.github.io/elastic/reference/docs_bulk_update.md)
  : Use the bulk API to update documents
- [`docs_create()`](https://rfhb.github.io/elastic/reference/docs_create.md)
  : Create a document
- [`docs_delete()`](https://rfhb.github.io/elastic/reference/docs_delete.md)
  : Delete a document
- [`docs_delete_by_query()`](https://rfhb.github.io/elastic/reference/docs_delete_by_query.md)
  : Delete documents by query
- [`docs_get()`](https://rfhb.github.io/elastic/reference/docs_get.md) :
  Get documents
- [`docs_mget()`](https://rfhb.github.io/elastic/reference/docs_mget.md)
  : Get multiple documents via the multiple get API
- [`docs_update()`](https://rfhb.github.io/elastic/reference/docs_update.md)
  : Update a document
- [`docs_update_by_query()`](https://rfhb.github.io/elastic/reference/docs_update_by_query.md)
  : Update documents by query
- [`documents`](https://rfhb.github.io/elastic/reference/documents.md) :
  Elasticsearch documents functions.
- [`termvectors()`](https://rfhb.github.io/elastic/reference/termvectors.md)
  : Termvectors
- [`mtermvectors()`](https://rfhb.github.io/elastic/reference/mtermvectors.md)
  : Multi Termvectors

## Indices

Index APIs

- [`index_template_put()`](https://rfhb.github.io/elastic/reference/index_template.md)
  [`index_template_get()`](https://rfhb.github.io/elastic/reference/index_template.md)
  [`index_template_exists()`](https://rfhb.github.io/elastic/reference/index_template.md)
  [`index_template_delete()`](https://rfhb.github.io/elastic/reference/index_template.md)
  : Index templates
- [`index_get()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_exists()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_delete()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_create()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_recreate()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_close()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_open()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_stats()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_settings()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_settings_update()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_segments()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_recovery()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_optimize()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_forcemerge()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_upgrade()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_analyze()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_flush()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_clear_cache()`](https://rfhb.github.io/elastic/reference/indices.md)
  [`index_shrink()`](https://rfhb.github.io/elastic/reference/indices.md)
  : Index API operations
- [`alias_get()`](https://rfhb.github.io/elastic/reference/alias.md)
  [`aliases_get()`](https://rfhb.github.io/elastic/reference/alias.md)
  [`alias_exists()`](https://rfhb.github.io/elastic/reference/alias.md)
  [`alias_create()`](https://rfhb.github.io/elastic/reference/alias.md)
  [`alias_rename()`](https://rfhb.github.io/elastic/reference/alias.md)
  [`alias_delete()`](https://rfhb.github.io/elastic/reference/alias.md)
  : Elasticsearch alias APIs
- [`mapping_create()`](https://rfhb.github.io/elastic/reference/mapping.md)
  [`mapping_get()`](https://rfhb.github.io/elastic/reference/mapping.md)
  [`field_mapping_get()`](https://rfhb.github.io/elastic/reference/mapping.md)
  [`type_exists()`](https://rfhb.github.io/elastic/reference/mapping.md)
  : Mapping management
- [`reindex()`](https://rfhb.github.io/elastic/reference/reindex.md) :
  Reindex

## Analysis

Analysis APIs

- [`tokenizer_set()`](https://rfhb.github.io/elastic/reference/tokenizer_set.md)
  : Tokenizer operations

## Ingest

Ingest APIs

- [`pipeline_create()`](https://rfhb.github.io/elastic/reference/ingest.md)
  [`pipeline_attachment()`](https://rfhb.github.io/elastic/reference/ingest.md)
  [`pipeline_get()`](https://rfhb.github.io/elastic/reference/ingest.md)
  [`pipeline_delete()`](https://rfhb.github.io/elastic/reference/ingest.md)
  [`pipeline_simulate()`](https://rfhb.github.io/elastic/reference/ingest.md)
  : Ingest API operations

## Cluster

Cluster/Nodes APIs

- [`nodes_stats()`](https://rfhb.github.io/elastic/reference/nodes.md)
  [`nodes_info()`](https://rfhb.github.io/elastic/reference/nodes.md)
  [`nodes_hot_threads()`](https://rfhb.github.io/elastic/reference/nodes.md)
  : Elasticsearch nodes endpoints.
- [`cluster_settings()`](https://rfhb.github.io/elastic/reference/cluster.md)
  [`cluster_health()`](https://rfhb.github.io/elastic/reference/cluster.md)
  [`cluster_state()`](https://rfhb.github.io/elastic/reference/cluster.md)
  [`cluster_stats()`](https://rfhb.github.io/elastic/reference/cluster.md)
  [`cluster_reroute()`](https://rfhb.github.io/elastic/reference/cluster.md)
  [`cluster_pending_tasks()`](https://rfhb.github.io/elastic/reference/cluster.md)
  : Elasticsearch cluster endpoints
- [`tasks()`](https://rfhb.github.io/elastic/reference/tasks.md)
  [`tasks_cancel()`](https://rfhb.github.io/elastic/reference/tasks.md)
  : Elasticsearch tasks endpoints

## Utilities

Various utility functions

- [`units-distance`](https://rfhb.github.io/elastic/reference/units-distance.md)
  : Distance units
- [`units-time`](https://rfhb.github.io/elastic/reference/units-time.md)
  : Time units
- [`type_remover()`](https://rfhb.github.io/elastic/reference/type_remover.md)
  : Utility function to remove 'type' from bulk load files

# Articles

### elastic introduction

- [elastic
  introduction](https://rfhb.github.io/elastic/articles/elastic.md):

### elastic searching

- [elastic
  searching](https://rfhb.github.io/elastic/articles/search.md):
